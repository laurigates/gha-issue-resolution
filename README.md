# GitHub Issue Resolution with Gemini Flash

This GitHub Action uses Google's Gemini Flash model to automatically analyze issues and provide detailed solution suggestions. The action processes new issues as they are created or edited, providing AI-generated suggestions that include code analysis and specific recommendations for fixes.

## Features

- Fast issue analysis using Gemini Flash model
- Detailed code suggestions and solutions
- Automatic file relevance detection
- Context-aware responses based on repository content
- Support for both event-triggered and manual processing
- Comprehensive safety filters
- Codebase-aware recommendations

## Usage

### Basic Setup

Add this to your repository's workflow file (e.g., `.github/workflows/issue-analysis.yml`):

```yaml
name: Analyze Issues
on:
  issues:
    types: [opened, reopened, edited]

jobs:
  analyze:
    runs-on: ubuntu-latest
    steps:
      - uses: laurigates/gha-issue-resolution@main
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          gemini_api_key: ${{ secrets.GEMINI_API_KEY }}
```

### Advanced Configuration

You can customize the token limit for responses:

```yaml
steps:
  - uses: laurigates/gha-issue-resolution@main
    with:
      github_token: ${{ secrets.GITHUB_TOKEN }}
      gemini_api_key: ${{ secrets.GEMINI_API_KEY }}
      max_tokens: '16384'  # Increase token limit for more detailed responses
```

## Required Secrets

1. `GEMINI_API_KEY`: Your Google Gemini API key (get it from [Google AI Studio](https://makersuite.google.com/app/apikey))
2. `GITHUB_TOKEN`: Automatically provided by GitHub Actions

## How It Works

1. When an issue is opened, reopened, or edited, the action is triggered
2. The script analyzes:
   - Issue title and description
   - Repository file structure
   - Relevant code files
3. Gemini Flash model generates:
   - Initial analysis of the issue
   - Identification of relevant files
   - Detailed solution suggestion
4. A comment is added to the issue with:
   - Problem analysis
   - Specific code changes needed
   - Potential side effects
   - Implementation considerations

## Response Format

The AI generates responses in the following structure:

```markdown
## AI-generated suggestion

Here's a potential solution to this issue, generated by an AI assistant:

1. Analysis of the problem
2. Specific code changes needed
3. Explanation of the solution
4. Potential side effects
```

## Development

### Local Testing

1. Clone the repository:
   ```bash
   git clone https://github.com/laurigates/gha-issue-resolution.git
   cd gha-issue-resolution
   ```

2. Install dependencies:
   ```bash
   pip install google-generativeai PyGithub
   ```

3. Set up environment variables:
   ```bash
   export GITHUB_TOKEN='your_token'
   export GEMINI_API_KEY='your_key'
   export GITHUB_REPOSITORY='owner/repo'
   ```

4. Run the script:
   ```bash
   python -m src.gha_issue_resolution
   ```

### Repository Structure

```
.
├── action.yml              # Action definition file
├── src/
│   └── gha_issue_resolution/
│       ├── __init__.py
│       └── __main__.py    # Main script
└── README.md
```

## Limitations

- The action only processes issues, not pull requests
- Maximum file size for analysis is 100,000 characters per file
- Limited to 5 relevant files per issue
- Requires Python 3.12 or higher

## Contributing

1. Fork the repository
2. Create a feature branch
3. Commit your changes
4. Push to the branch
5. Create a Pull Request

## License

MIT License - see LICENSE file for details

## Support

For bugs, questions, and discussions, please use the [GitHub Issues](https://github.com/laurigates/gha-issue-resolution/issues).
